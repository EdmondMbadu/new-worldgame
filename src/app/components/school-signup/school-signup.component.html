<div class="min-h-screen flex flex-col bg-gradient-to-br from-white via-slate-50 to-teal-50
            dark:bg-gradient-to-b dark:from-slate-900 dark:via-slate-900 dark:to-slate-800">
  <!-- Top bar -->
  <app-navbar [currentPageJoinNow]="true"></app-navbar>

  <!-- Centered card -->
  <main class="flex-grow flex items-center justify-center px-4 py-20">
    <form
      class="w-full max-w-xl rounded-3xl bg-white/90 dark:bg-slate-800/90 backdrop-blur
             shadow-xl shadow-teal-600/10 dark:shadow-teal-400/10 ring-1 ring-teal-500/10
             p-8 md:p-12 space-y-10"
      (ngSubmit)="createSchoolAccount()"
      novalidate
    >
      <!-- ◈ header -->
      <header class="text-center space-y-3">
        <h1
          class="text-3xl font-extrabold tracking-tight
                 bg-gradient-to-r from-teal-600 to-emerald-500 bg-clip-text text-transparent
                 dark:from-teal-400 dark:to-emerald-300"
        >
          Register your School
        </h1>
        <p class="text-sm text-slate-600 dark:text-slate-400">
          Create the first admin account for the school.
        </p>
      </header>

      <!-- ◈ admin names -->
      <div class="grid gap-6 md:grid-cols-2">
        <div>
          <label
            for="first_name"
            class="block mb-1 text-sm font-medium text-slate-700 dark:text-slate-200"
            >Admin first name</label
          >
          <input
            id="first_name"
            type="text"
            name="firstName"
            [(ngModel)]="firstName"
            required
            class="w-full rounded-xl bg-slate-100 dark:bg-slate-700/60 text-slate-900 dark:text-slate-100
                   border border-slate-300 dark:border-slate-600 px-4 py-2.5 text-sm
                   placeholder:text-slate-400 dark:placeholder:text-slate-500
                   focus:outline-none focus:ring-2 focus:ring-teal-500 focus:ring-offset-2
                   focus:ring-offset-white dark:focus:ring-offset-slate-800 transition"
          />
        </div>

        <div>
          <label
            for="last_name"
            class="block mb-1 text-sm font-medium text-slate-700 dark:text-slate-200"
            >Admin last name</label
          >
          <input
            id="last_name"
            type="text"
            name="lastName"
            [(ngModel)]="lastName"
            required
            class="w-full rounded-xl bg-slate-100 dark:bg-slate-700/60 text-slate-900 dark:text-slate-100
                   border border-slate-300 dark:border-slate-600 px-4 py-2.5 text-sm
                   placeholder:text-slate-400 dark:placeholder:text-slate-500
                   focus:outline-none focus:ring-2 focus:ring-teal-500 focus:ring-offset-2
                   focus:ring-offset-white dark:focus:ring-offset-slate-800 transition"
          />
        </div>
      </div>

      <!-- ◈ school name -->
      <div>
        <label
          for="school_name"
          class="block mb-1 text-sm font-medium text-slate-700 dark:text-slate-200"
          >School name</label
        >
        <input
          id="school_name"
          type="text"
          name="schoolName"
          [(ngModel)]="schoolName"
          required
          class="w-full rounded-xl bg-slate-100 dark:bg-slate-700/60 text-slate-900 dark:text-slate-100
                 border border-slate-300 dark:border-slate-600 px-4 py-2.5 text-sm
                 placeholder:text-slate-400 dark:placeholder:text-slate-500
                 focus:outline-none focus:ring-2 focus:ring-teal-500 focus:ring-offset-2
                 focus:ring-offset-white dark:focus:ring-offset-slate-800 transition"
        />
      </div>

      <!-- ◈ email -->
      <div>
        <label
          for="email"
          class="block mb-1 text-sm font-medium text-slate-700 dark:text-slate-200"
          >Admin email</label
        >
        <input
          id="email"
          type="email"
          name="email"
          [(ngModel)]="email"
          required
          class="w-full rounded-xl bg-slate-100 dark:bg-slate-700/60 text-slate-900 dark:text-slate-100
                 border border-slate-300 dark:border-slate-600 px-4 py-2.5 text-sm
                 placeholder:text-slate-400 dark:placeholder:text-slate-500
                 focus:outline-none focus:ring-2 focus:ring-teal-500 focus:ring-offset-2
                 focus:ring-offset-white dark:focus:ring-offset-slate-800 transition"
        />
      </div>

      <!-- ◈ passwords -->
      <div class="grid gap-6 md:grid-cols-2">
        <div>
          <label
            for="pwd"
            class="block mb-1 text-sm font-medium text-slate-700 dark:text-slate-200"
            >Password</label
          >
          <input
            id="pwd"
            type="password"
            name="password"
            [(ngModel)]="password"
            required
            class="w-full rounded-xl bg-slate-100 dark:bg-slate-700/60 text-slate-900 dark:text-slate-100
                   border border-slate-300 dark:border-slate-600 px-4 py-2.5 text-sm
                   placeholder:text-slate-400 dark:placeholder:text-slate-500
                   focus:outline-none focus:ring-2 focus:ring-teal-500 focus:ring-offset-2
                   focus:ring-offset-white dark:focus:ring-offset-slate-800 transition"
          />
        </div>

        <div>
          <label
            for="pwd2"
            class="block mb-1 text-sm font-medium text-slate-700 dark:text-slate-200"
            >Confirm password</label
          >
          <input
            id="pwd2"
            type="password"
            name="rePassword"
            [(ngModel)]="rePassword"
            required
            class="w-full rounded-xl bg-slate-100 dark:bg-slate-700/60 text-slate-900 dark:text-slate-100
                   border border-slate-300 dark:border-slate-600 px-4 py-2.5 text-sm
                   placeholder:text-slate-400 dark:placeholder:text-slate-500
                   focus:outline-none focus:ring-2 focus:ring-teal-500 focus:ring-offset-2
                   focus:ring-offset-white dark:focus:ring-offset-slate-800 transition"
          />
        </div>
      </div>

      <!-- ◈ terms -->
      <label class="flex items-start gap-3 text-sm select-none">
        <input
          type="checkbox"
          class="accent-teal-600 shrink-0 mt-1 h-4 w-4 rounded border-slate-300
                 dark:border-slate-600 focus:ring-teal-500"
          (change)="agreed = !agreed"
        />
        <span class="text-slate-700 dark:text-slate-300"
          >I agree to the
          <a
            routerLink="/privacy"
            target="_blank"
            class="text-teal-600 hover:underline"
            >terms &amp; conditions</a
          >.</span
        >
      </label>

      <!-- ◈ submit -->
   <button
        type="submit"
        [disabled]="loading"
        class="relative w-full py-3 rounded-full font-semibold bg-gradient-to-r
         from-teal-600 to-emerald-500 hover:from-teal-700 hover:to-emerald-600
         active:scale-95 transition text-white disabled:opacity-40 overflow-hidden
         flex items-center justify-center gap-2"
            >
            <svg
                *ngIf="loading"
                class="animate-spin h-5 w-5 text-white"
                viewBox="0 0 24 24"
                fill="none"
                stroke="currentColor"
                stroke-width="2"
            >
                <circle cx="12" cy="12" r="10" opacity="0.25"></circle>
                <path
                d="M22 12a10 10 0 0 1-10 10"
                opacity="0.75"
                stroke-linecap="round"
                ></path>
            </svg>
            <span>{{ loading ? 'Creating…' : 'Create school account' }}</span>
    </button>


      <!-- ◈ toast: success -->
      <div
        *ngIf="success"
        class="flex items-center gap-2 text-sm text-green-800 dark:text-green-200
               bg-green-50 dark:bg-green-800/40 p-3 rounded-lg"
      >
        <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 20 20">
          <path
            d="M10 18a8 8 0 1 0-8-8 8 8 0 0 0 8 8zm3.54-10.79-4 4a1 1 0 0 1-1.42 0l-2-2a1 1 0 0 1 1.42-1.42L9 9.59l3.29-3.3a1 1 0 0 1 1.42 1.42Z"
          />
        </svg>
        School registered! Check your inbox to verify the email.
      </div>

      <!-- ◈ toast: error -->
      <div
        *ngIf="errorMsg"
        class="flex items-center gap-2 text-sm text-red-800 dark:text-red-200
               bg-red-50 dark:bg-red-800/40 p-3 rounded-lg"
      >
        <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 20 20">
          <path
            d="M10 18a8 8 0 1 0-8-8 8 8 0 0 0 8 8zm1-11V5a1 1 0 0 0-2 0v2a1 1 0 1 0 2 0zm-1 3a1 1 0 0 0-1 1v3a1 1 0 0 0 2 0v-3a1 1 0 0 0-1-1Z"
          />
        </svg>
        {{ errorMsg }}
      </div>
    </form>
  </main>

  <app-footer></app-footer>
</div>
