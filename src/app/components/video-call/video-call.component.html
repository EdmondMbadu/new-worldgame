<div class="dark:bg-slate-900 min-h-screen flex items-center justify-center">
  <div class="flex flex-col items-center w-full h-full">
    <!-- Video Grid Container -->
    <div
      class="video-grid mb-4 w-max h-max p-4 grid gap-4"
      [ngClass]="{
        'grid-cols-1': participants.length + 1 === 1,
        'grid-cols-2': participants.length + 1 === 2,
        'grid-cols-3': participants.length + 1 === 3,
        'grid-cols-4': participants.length + 1 > 3
      }"
    >
      <!-- Local Video -->
      <div
        class="video-container relative bg-black shadow-xl ring-1 ring-gray-900/5 text-white sm:rounded-lg aspect-video"
      >
        <video
          autoplay
          playsinline
          [muted]="true"
          class="local-video w-full h-full object-cover"
          [appSrcObject]="localStream"
        ></video>
        <h1 class="absolute bottom-2 left-2 text-sm bg-black bg-opacity-50 px-2 py-1 rounded">
          {{ auth.currentUser.firstName }} {{ auth.currentUser.lastName }}
        </h1>
      </div>

      <!-- Remote Participant Videos -->
      <div
        *ngFor="let participant of participants; trackBy: trackById"
        class="video-container relative bg-black shadow-xl ring-1 ring-gray-900/5 text-white sm:rounded-lg aspect-video"
      >
        <video
          [id]="'remoteVideo' + participant.id"
          autoplay
          playsinline
          class="remote-video w-full h-full object-cover"
          [appSrcObject]="participant.stream"
          [muted]="false"
        ></video>
        <h1 class="absolute bottom-2 left-2 text-sm bg-black bg-opacity-50 px-2 py-1 rounded">
          {{ participant.firstName }}  {{ participant.lastName }}
        </h1>
      </div>
    </div>

    <!-- Controls -->
    <div
      class="flex flex-row justify-center space-x-36 mt-4 dark:bg-gray-700 sm:rounded-lg pt-3 pb-3 pl-10 pr-10"
    >
      <!-- Toggle Video Button -->
      <svg
        (click)="toggleVideo()"
        [title]="isVideoMuted ? 'Turn On Video' : 'Turn Off Video'"
        class="w-[36px] h-[36px] text-gray-800 dark:text-white cursor-pointer"
        aria-hidden="true"
        xmlns="http://www.w3.org/2000/svg"
        width="24"
        height="24"
        fill="currentColor"
        viewBox="0 0 24 24"
      >
        <path
          fill-rule="evenodd"
          d="M14 7a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2v10a2 2 0 0 0 2 2h8a2 2 0 0 0 2-2V7Zm2 9.387 4.684 1.562A1 1 0 0 0 22 17V7a1 1 0 0 0-1.316-.949L16 7.613v8.774Z"
          clip-rule="evenodd"
        />
      </svg>

      <!-- Toggle Audio Button -->
      <svg
        (click)="toggleAudio()"
        [title]="isAudioMuted ? 'Unmute Audio' : 'Mute Audio'"
        class="w-[36px] h-[36px] text-gray-800 dark:text-white cursor-pointer"
        aria-hidden="true"
        xmlns="http://www.w3.org/2000/svg"
        width="24"
        height="24"
        fill="currentColor"
        viewBox="0 0 24 24"
      >
        <path
          fill-rule="evenodd"
          d="M5 8a1 1 0 0 1 1 1v3a4.006 4.006 0 0 0 4 4h4a4.006 4.006 0 0 0 4-4V9a1 1 0 1 1 2 0v3.001A6.006 6.006 0 0 1 14.001 18H13v2h2a1 1 0 1 1 0 2H9a1 1 0 1 1 0-2h2v-2H9.999A6.006 6.006 0 0 1 4 12.001V9a1 1 0 0 1 1-1Z"
          clip-rule="evenodd"
        />
        <path
          d="M7 6a4 4 0 0 1 4-4h2a4 4 0 0 1 4 4v5a4 4 0 0 1-4 4h-2a4 4 0 0 1-4-4V6Z"
        />
      </svg>

      <!-- Leave Call Button -->
      <button
        (click)="leaveCall()"
        class="hover:w-12 cursor-pointer"
        title="Leave Call"
      >
        <img src="../../../assets/img/end-call.png" alt="Leave Call" />
      </button>
    </div>
  </div>
</div>
